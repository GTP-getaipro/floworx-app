# FloWorx Production Environment Configuration
# Copy this file to .env.production and configure with your production values

# =============================================================================
# CORE APPLICATION SETTINGS
# =============================================================================
NODE_ENV=production
APP_VERSION=1.0.0
DEPLOYMENT_ID=prod-001
PORT=5001

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_URL=postgresql://username:password@localhost:5432/floworx_production
DB_HOST=localhost
DB_PORT=5432
DB_NAME=floworx_production
DB_USER=floworx_user
DB_PASSWORD=your_secure_password
DB_SSL=true
DB_MAX_CONNECTIONS=20

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
JWT_SECRET=your_super_secure_jwt_secret_key_here_minimum_32_characters
ENCRYPTION_KEY=your_32_character_encryption_key_here
SESSION_SECRET=your_session_secret_key_here

# =============================================================================
# MONITORING THRESHOLDS
# =============================================================================
# Database query performance (milliseconds)
MONITOR_SLOW_QUERY_MS=500
MONITOR_CRITICAL_QUERY_MS=2000

# API endpoint performance (milliseconds)
MONITOR_SLOW_ENDPOINT_MS=1000
MONITOR_CRITICAL_ENDPOINT_MS=3000

# System resource thresholds (0.0 to 1.0)
MONITOR_HIGH_MEMORY=0.85
MONITOR_HIGH_CPU=0.80

# Database connection thresholds
MONITOR_HIGH_CONNECTIONS=15
MONITOR_CRITICAL_CONNECTIONS=25

# Error rate thresholds (0.0 to 1.0)
MONITOR_ERROR_RATE=0.02
MONITOR_CRITICAL_ERROR_RATE=0.05

# Business metric thresholds (0.0 to 1.0)
MONITOR_ONBOARDING_FAILURE_RATE=0.10
MONITOR_WORKFLOW_FAILURE_RATE=0.05
MONITOR_OAUTH_FAILURE_RATE=0.03

# =============================================================================
# MONITORING DATA RETENTION
# =============================================================================
MONITOR_QUERY_RETENTION_HOURS=24
MONITOR_ERROR_RETENTION_DAYS=30
MONITOR_PERFORMANCE_RETENTION_DAYS=7
MONITOR_ALERT_RETENTION_DAYS=90

# =============================================================================
# MONITORING INTERVALS (milliseconds)
# =============================================================================
MONITOR_METRICS_INTERVAL_MS=30000
MONITOR_HEALTH_CHECK_INTERVAL_MS=60000
MONITOR_ALERT_CHECK_INTERVAL_MS=60000
MONITOR_CLEANUP_INTERVAL_MS=3600000

# =============================================================================
# ERROR TRACKING CONFIGURATION
# =============================================================================
ERROR_FILE_LOGGING=true
ERROR_LOG_DIRECTORY=/var/log/floworx/errors
ERROR_LOG_MAX_SIZE=100MB
ERROR_LOG_MAX_FILES=10
ERROR_LOG_ROTATION=daily

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================

# Sentry Error Tracking
SENTRY_ENABLED=false
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_SAMPLE_RATE=1.0

# DataDog Monitoring
DATADOG_ENABLED=false
DATADOG_API_KEY=your_datadog_api_key
DATADOG_APP_KEY=your_datadog_app_key
DATADOG_SITE=datadoghq.com

# New Relic Monitoring
NEW_RELIC_ENABLED=false
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key
NEW_RELIC_APP_NAME=FloWorx-Production

# =============================================================================
# ALERTING CONFIGURATION
# =============================================================================

# Slack Alerts
SLACK_ALERTS_ENABLED=true
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_ALERT_CHANNEL=#floworx-alerts

# Email Alerts
EMAIL_ALERTS_ENABLED=true
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=your_email_password
ALERT_FROM_EMAIL=alerts@floworx-iq.com

# Alert Recipients (comma-separated)
CRITICAL_ALERT_EMAILS=cto@floworx-iq.com,devops@floworx-iq.com
HIGH_ALERT_EMAILS=engineering@floworx-iq.com,operations@floworx-iq.com
MEDIUM_ALERT_EMAILS=team@floworx-iq.com

# PagerDuty Integration
PAGERDUTY_ENABLED=false
PAGERDUTY_INTEGRATION_KEY=your_pagerduty_integration_key
PAGERDUTY_SERVICE_KEY=your_pagerduty_service_key

# Microsoft Teams Alerts
TEAMS_ALERTS_ENABLED=false
TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/your-teams-webhook

# =============================================================================
# ALERT COOLDOWN PERIODS (milliseconds)
# =============================================================================
ALERT_COOLDOWN_CRITICAL_MS=300000
ALERT_COOLDOWN_HIGH_MS=900000
ALERT_COOLDOWN_MEDIUM_MS=1800000
ALERT_COOLDOWN_LOW_MS=3600000

# =============================================================================
# ALERT ESCALATION
# =============================================================================
ALERT_ESCALATION_ENABLED=true
ESCALATION_CRITICAL_MS=900000
ESCALATION_HIGH_MS=1800000
ESCALATION_MEDIUM_MS=3600000

# =============================================================================
# REPORTING CONFIGURATION
# =============================================================================

# Report Recipients (comma-separated)
EXECUTIVE_REPORT_EMAILS=ceo@floworx-iq.com,cto@floworx-iq.com
OPERATIONS_REPORT_EMAILS=operations@floworx-iq.com,devops@floworx-iq.com
DEVELOPMENT_REPORT_EMAILS=engineering@floworx-iq.com
CUSTOMER_SUCCESS_REPORT_EMAILS=success@floworx-iq.com,support@floworx-iq.com

# Report Configuration
REPORT_TIMEZONE=America/New_York
REPORT_FROM_EMAIL=reports@floworx-iq.com
SLACK_REPORTS_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/REPORTS

# =============================================================================
# BUSINESS HOURS CONFIGURATION
# =============================================================================
BUSINESS_TIMEZONE=America/New_York
BUSINESS_HOURS_START=09:00
BUSINESS_HOURS_END=17:00

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
HEALTH_CHECK_DB_TIMEOUT_MS=5000
HEALTH_CHECK_N8N_TIMEOUT_MS=10000
HEALTH_CHECK_GMAIL_TIMEOUT_MS=15000
HEALTH_CHECK_SUPABASE_TIMEOUT_MS=10000

HEALTH_CHECK_INTERNAL_INTERVAL_MS=30000
HEALTH_CHECK_EXTERNAL_INTERVAL_MS=60000
HEALTH_CHECK_DEEP_INTERVAL_MS=300000

# =============================================================================
# N8N WORKFLOW INTEGRATION
# =============================================================================
N8N_BASE_URL=https://your-n8n-instance.com
N8N_API_KEY=your_n8n_api_key
N8N_HEALTH_CHECK_ENABLED=true
N8N_HEALTH_CHECK_URL=https://your-n8n-instance.com/healthz

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key
SUPABASE_HEALTH_CHECK_ENABLED=true

# =============================================================================
# OAUTH CONFIGURATION
# =============================================================================
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URI=https://app.floworx-iq.com/api/oauth/google/callback

# =============================================================================
# REDIS CONFIGURATION (Optional)
# =============================================================================
REDIS_ENABLED=false
REDIS_URL=redis://localhost:6379
REDIS_MAX_MEMORY=256mb
REDIS_EVICTION_POLICY=allkeys-lru

# =============================================================================
# AUTO-SCALING CONFIGURATION
# =============================================================================
AUTO_SCALING_ENABLED=false
AUTO_SCALE_CPU_THRESHOLD=0.70
AUTO_SCALE_MEMORY_THRESHOLD=0.80
AUTO_SCALE_RESPONSE_TIME_MS=2000

# =============================================================================
# SECURITY MONITORING
# =============================================================================
SECURITY_BLOCK_THRESHOLD=100
AUTH_LOCKOUT_THRESHOLD=5

# =============================================================================
# AWS CONFIGURATION (if using AWS)
# =============================================================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/var/log/floworx/app.log
LOG_MAX_SIZE=100MB
LOG_MAX_FILES=5

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS_ORIGIN=https://app.floworx-iq.com,https://www.floworx-iq.com
CORS_CREDENTIALS=true

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
SSL_ENABLED=true
SSL_CERT_PATH=/path/to/ssl/cert.pem
SSL_KEY_PATH=/path/to/ssl/key.pem

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=floworx-backups

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_ADAPTIVE_THRESHOLDS=true
FEATURE_BUSINESS_ALERTING=true
FEATURE_STAKEHOLDER_REPORTS=true
FEATURE_REAL_TIME_MONITORING=true
FEATURE_ERROR_TRACKING=true
