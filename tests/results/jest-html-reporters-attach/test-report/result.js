window.jest_html_reporters_callback__({"numFailedTestSuites":1,"numFailedTests":7,"numPassedTestSuites":0,"numPassedTests":15,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":22,"startTime":1757827432273,"success":false,"testResults":[{"numFailingTests":7,"numPassingTests":15,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1757827434539,"loadTestEnvironmentEnd":1757827432327,"loadTestEnvironmentStart":1757827432289,"runtime":2211,"setupAfterEnvEnd":1757827432915,"setupAfterEnvStart":1757827432482,"setupFilesEnd":1757827432328,"setupFilesStart":1757827432328,"slow":false,"start":1757827432328},"testFilePath":"C:\\FloworxInvite\\tests\\unit\\OAuthService.test.js","failureMessage":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mOAuthService Unit Tests › Constructor and Configuration › should create Google OAuth2 client with correct configuration\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m\"test-client-id\"\u001b[39m, \u001b[32m\"test-client-secret\"\u001b[39m, \u001b[32m\"http://localhost:3000/callback\"\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 80 |\u001b[39m       \u001b[36mconst\u001b[39m client \u001b[33m=\u001b[39m oauthService\u001b[33m.\u001b[39mgetGoogleOAuth2Client()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 81 |\u001b[39m       \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 82 |\u001b[39m       expect(google\u001b[33m.\u001b[39mauth\u001b[33m.\u001b[39m\u001b[33mOAuth2\u001b[39m)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 83 |\u001b[39m         \u001b[32m'test-client-id'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 84 |\u001b[39m         \u001b[32m'test-client-secret'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 85 |\u001b[39m         \u001b[32m'http://localhost:3000/callback'\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toHaveBeenCalledWith (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/OAuthService.test.js\u001b[39m\u001b[0m\u001b[2m:82:34)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mOAuthService Unit Tests › Authorization URL Generation › should generate Google authorization URL\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m\"https://accounts.google.com/oauth\u001b[7m/authorize?client_id=test\u001b[27m\"\u001b[39m\n    Received: \u001b[31m\"https://accounts.google.com/\u001b[7mo/\u001b[27moauth\u001b[7m2/v2/auth?access_type=offline&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.readonly%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar.readonly&state=test-user-id&prompt=consent&include_granted_scopes=true&response_type=code&client_id=test-client-id&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fcallback\u001b[27m\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 103 |\u001b[39m       \u001b[36mconst\u001b[39m authUrl \u001b[33m=\u001b[39m oauthService\u001b[33m.\u001b[39mgenerateAuthUrl(\u001b[32m'google'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'test-user-id'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 104 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 105 |\u001b[39m       expect(authUrl)\u001b[33m.\u001b[39mtoBe(expectedUrl)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 106 |\u001b[39m       expect(mockOAuth2Client\u001b[33m.\u001b[39mgenerateAuthUrl)\u001b[33m.\u001b[39mtoHaveBeenCalledWith({\u001b[22m\n\u001b[2m     \u001b[90m 107 |\u001b[39m         access_type\u001b[33m:\u001b[39m \u001b[32m'offline'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 108 |\u001b[39m         scope\u001b[33m:\u001b[39m oauthService\u001b[33m.\u001b[39mscopes\u001b[33m.\u001b[39mgoogle\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/OAuthService.test.js\u001b[39m\u001b[0m\u001b[2m:105:23)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mOAuthService Unit Tests › Token Exchange › should exchange authorization code for tokens successfully\u001b[39m\u001b[22m\n\n    Failed to exchange authorization code: invalid_client\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 115 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\u001b[22m\n\u001b[2m     \u001b[90m 116 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m`${provider} token exchange error:`\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 117 |\u001b[39m         \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to exchange authorization code: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 118 |\u001b[39m       }\u001b[22m\n\u001b[2m     \u001b[90m 119 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 120 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat OAuthService.exchangeCodeForTokens (\u001b[22m\u001b[2mbackend/services/OAuthService.js\u001b[2m:117:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/OAuthService.test.js\u001b[39m\u001b[0m\u001b[2m:143:22)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mOAuthService Unit Tests › Token Exchange › should handle missing access token\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected substring: \u001b[32m\"No access token received from Google\"\u001b[39m\n    Received message:   \u001b[31m\"Failed to exchange authorization code: invalid_client\"\u001b[39m\n\n        \u001b[0m \u001b[90m 115 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n         \u001b[90m 116 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m`${provider} token exchange error:`\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 117 |\u001b[39m         \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to exchange authorization code: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 118 |\u001b[39m       }\n         \u001b[90m 119 |\u001b[39m     }\n         \u001b[90m 120 |\u001b[39m\u001b[0m\n\n          \u001b[2mat OAuthService.exchangeCodeForTokens (\u001b[22mbackend/services/OAuthService.js\u001b[2m:117:15)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22mtests/unit/OAuthService.test.js\u001b[2m:169:7)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 169 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m 170 |\u001b[39m         oauthService\u001b[33m.\u001b[39mexchangeCodeForTokens(\u001b[32m'google'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'test-code'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'test-user-id'\u001b[39m)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 171 |\u001b[39m       )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'No access token received from Google'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 172 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 173 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 174 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2mnode_modules/expect/build/index.js\u001b[2m:2155:20)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/OAuthService.test.js\u001b[39m\u001b[0m\u001b[2m:171:17)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mOAuthService Unit Tests › Token Refresh › should refresh access token successfully\u001b[39m\u001b[22m\n\n    Token refresh failed: invalid_client\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 227 |\u001b[39m     } \u001b[36mcatch\u001b[39m (error) {\u001b[22m\n\u001b[2m     \u001b[90m 228 |\u001b[39m       console\u001b[33m.\u001b[39merror(\u001b[32m`❌ Token refresh failed for ${provider}:`\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 229 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Token refresh failed: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 230 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 231 |\u001b[39m   }\u001b[22m\n\u001b[2m     \u001b[90m 232 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat OAuthService.refreshAccessToken (\u001b[22m\u001b[2mbackend/services/OAuthService.js\u001b[2m:229:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/OAuthService.test.js\u001b[39m\u001b[0m\u001b[2m:252:22)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mOAuthService Unit Tests › Token Validation › should get valid access token with refresh\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mtrue\u001b[39m\n    Received: \u001b[31mfalse\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 349 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m oauthService\u001b[33m.\u001b[39mgetValidAccessToken(\u001b[32m'test-user-id'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'google'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 350 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 351 |\u001b[39m       expect(result\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 352 |\u001b[39m       expect(result\u001b[33m.\u001b[39maccessToken)\u001b[33m.\u001b[39mtoBe(\u001b[32m'new-access-token'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 353 |\u001b[39m       expect(result\u001b[33m.\u001b[39mrefreshed)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 354 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toBe (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/OAuthService.test.js\u001b[39m\u001b[0m\u001b[2m:351:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mOAuthService Unit Tests › Connection Revocation › should revoke connection successfully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32m\"test-access-token\"\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 415 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 416 |\u001b[39m       expect(result\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 417 |\u001b[39m       expect(mockOAuth2Client\u001b[33m.\u001b[39mrevokeToken)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[32m'test-access-token'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 418 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 419 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 420 |\u001b[39m     test(\u001b[32m'should handle revocation when no connection exists'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toHaveBeenCalledWith (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtests/unit/OAuthService.test.js\u001b[39m\u001b[0m\u001b[2m:417:44)\u001b[22m\u001b[2m\u001b[22m\n","testResults":[{"ancestorTitles":["OAuthService Unit Tests","Constructor and Configuration"],"duration":2,"failureMessages":[],"fullName":"OAuthService Unit Tests Constructor and Configuration should initialize with supported providers","status":"passed","title":"should initialize with supported providers"},{"ancestorTitles":["OAuthService Unit Tests","Constructor and Configuration"],"duration":2,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-client-id\"\u001b[39m, \u001b[32m\"test-client-secret\"\u001b[39m, \u001b[32m\"http://localhost:3000/callback\"\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.toHaveBeenCalledWith (C:\\FloworxInvite\\tests\\unit\\OAuthService.test.js:82:34)\n    at Promise.finally.completed (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1496:10)\n    at _callCircusTest (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1917:21)\n    at jestAdapter (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\FloworxInvite\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\FloworxInvite\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"OAuthService Unit Tests Constructor and Configuration should create Google OAuth2 client with correct configuration","status":"failed","title":"should create Google OAuth2 client with correct configuration"},{"ancestorTitles":["OAuthService Unit Tests","Constructor and Configuration"],"duration":10,"failureMessages":[],"fullName":"OAuthService Unit Tests Constructor and Configuration should throw error for missing Google configuration","status":"passed","title":"should throw error for missing Google configuration"},{"ancestorTitles":["OAuthService Unit Tests","Authorization URL Generation"],"duration":5,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32m\"https://accounts.google.com/oauth\u001b[7m/authorize?client_id=test\u001b[27m\"\u001b[39m\nReceived: \u001b[31m\"https://accounts.google.com/\u001b[7mo/\u001b[27moauth\u001b[7m2/v2/auth?access_type=offline&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.readonly%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcalendar.readonly&state=test-user-id&prompt=consent&include_granted_scopes=true&response_type=code&client_id=test-client-id&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fcallback\u001b[27m\"\u001b[39m\n    at Object.toBe (C:\\FloworxInvite\\tests\\unit\\OAuthService.test.js:105:23)\n    at Promise.finally.completed (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1496:10)\n    at _callCircusTest (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1917:21)\n    at jestAdapter (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\FloworxInvite\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\FloworxInvite\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"OAuthService Unit Tests Authorization URL Generation should generate Google authorization URL","status":"failed","title":"should generate Google authorization URL"},{"ancestorTitles":["OAuthService Unit Tests","Authorization URL Generation"],"duration":1,"failureMessages":[],"fullName":"OAuthService Unit Tests Authorization URL Generation should throw error for unsupported provider","status":"passed","title":"should throw error for unsupported provider"},{"ancestorTitles":["OAuthService Unit Tests","Token Exchange"],"duration":197,"failureMessages":["Error: Failed to exchange authorization code: invalid_client\n    at OAuthService.exchangeCodeForTokens (C:\\FloworxInvite\\backend\\services\\OAuthService.js:117:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\FloworxInvite\\tests\\unit\\OAuthService.test.js:143:22)"],"fullName":"OAuthService Unit Tests Token Exchange should exchange authorization code for tokens successfully","status":"failed","title":"should exchange authorization code for tokens successfully"},{"ancestorTitles":["OAuthService Unit Tests","Token Exchange"],"duration":61,"failureMessages":[],"fullName":"OAuthService Unit Tests Token Exchange should handle token exchange failure","status":"passed","title":"should handle token exchange failure"},{"ancestorTitles":["OAuthService Unit Tests","Token Exchange"],"duration":68,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected substring: \u001b[32m\"No access token received from Google\"\u001b[39m\nReceived message:   \u001b[31m\"Failed to exchange authorization code: invalid_client\"\u001b[39m\n\n    \u001b[0m \u001b[90m 115 |\u001b[39m       } \u001b[36mcatch\u001b[39m (error) {\n     \u001b[90m 116 |\u001b[39m         console\u001b[33m.\u001b[39merror(\u001b[32m`${provider} token exchange error:`\u001b[39m\u001b[33m,\u001b[39m error)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 117 |\u001b[39m         \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Failed to exchange authorization code: ${error.message}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 118 |\u001b[39m       }\n     \u001b[90m 119 |\u001b[39m     }\n     \u001b[90m 120 |\u001b[39m\u001b[0m\n\n      \u001b[2mat OAuthService.exchangeCodeForTokens (\u001b[22mbackend/services/OAuthService.js\u001b[2m:117:15)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22mtests/unit/OAuthService.test.js\u001b[2m:169:7)\u001b[22m\n    at Object.toThrow (C:\\FloworxInvite\\node_modules\\expect\\build\\index.js:2155:20)\n    at Object.toThrow (C:\\FloworxInvite\\tests\\unit\\OAuthService.test.js:171:17)\n    at Promise.finally.completed (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1556:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1496:10)\n    at _callCircusTest (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1006:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:946:3)\n    at _runTestsForDescribeBlock (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1917:21)\n    at jestAdapter (C:\\FloworxInvite\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\FloworxInvite\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\FloworxInvite\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"OAuthService Unit Tests Token Exchange should handle missing access token","status":"failed","title":"should handle missing access token"},{"ancestorTitles":["OAuthService Unit Tests","Token Storage and Retrieval"],"duration":3,"failureMessages":[],"fullName":"OAuthService Unit Tests Token Storage and Retrieval should store tokens successfully","status":"passed","title":"should store tokens successfully"},{"ancestorTitles":["OAuthService Unit Tests","Token Storage and Retrieval"],"duration":0,"failureMessages":[],"fullName":"OAuthService Unit Tests Token Storage and Retrieval should retrieve tokens successfully","status":"passed","title":"should retrieve tokens successfully"},{"ancestorTitles":["OAuthService Unit Tests","Token Storage and Retrieval"],"duration":1,"failureMessages":[],"fullName":"OAuthService Unit Tests Token Storage and Retrieval should return null for non-existent tokens","status":"passed","title":"should return null for non-existent tokens"},{"ancestorTitles":["OAuthService Unit Tests","Token Refresh"],"duration":59,"failureMessages":["Error: Token refresh failed: invalid_client\n    at OAuthService.refreshAccessToken (C:\\FloworxInvite\\backend\\services\\OAuthService.js:229:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at Object.<anonymous> (C:\\FloworxInvite\\tests\\unit\\OAuthService.test.js:252:22)"],"fullName":"OAuthService Unit Tests Token Refresh should refresh access token successfully","status":"failed","title":"should refresh access token successfully"},{"ancestorTitles":["OAuthService Unit Tests","Token Refresh"],"duration":4,"failureMessages":[],"fullName":"OAuthService Unit Tests Token Refresh should handle missing refresh token","status":"passed","title":"should handle missing refresh token"},{"ancestorTitles":["OAuthService Unit Tests","Token Refresh"],"duration":56,"failureMessages":[],"fullName":"OAuthService Unit Tests Token Refresh should handle refresh token failure","status":"passed","title":"should handle refresh token failure"},{"ancestorTitles":["OAuthService Unit Tests","Token Validation"],"duration":1,"failureMessages":[],"fullName":"OAuthService Unit Tests Token Validation should identify tokens that need refresh","status":"passed","title":"should identify tokens that need refresh"},{"ancestorTitles":["OAuthService Unit Tests","Token Validation"],"duration":1,"failureMessages":[],"fullName":"OAuthService Unit Tests Token Validation should get valid access token without refresh","status":"passed","title":"should get valid access token without refresh"},{"ancestorTitles":["OAuthService Unit Tests","Token Validation"],"duration":55,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\nExpected: \u001b[32mtrue\u001b[39m\nReceived: \u001b[31mfalse\u001b[39m\n    at Object.toBe (C:\\FloworxInvite\\tests\\unit\\OAuthService.test.js:351:30)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"OAuthService Unit Tests Token Validation should get valid access token with refresh","status":"failed","title":"should get valid access token with refresh"},{"ancestorTitles":["OAuthService Unit Tests","Connection Status"],"duration":2,"failureMessages":[],"fullName":"OAuthService Unit Tests Connection Status should get OAuth connections status","status":"passed","title":"should get OAuth connections status"},{"ancestorTitles":["OAuthService Unit Tests","Connection Status"],"duration":1,"failureMessages":[],"fullName":"OAuthService Unit Tests Connection Status should check active connection status","status":"passed","title":"should check active connection status"},{"ancestorTitles":["OAuthService Unit Tests","Connection Revocation"],"duration":50,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32m\"test-access-token\"\u001b[39m\n\nNumber of calls: \u001b[31m0\u001b[39m\n    at Object.toHaveBeenCalledWith (C:\\FloworxInvite\\tests\\unit\\OAuthService.test.js:417:44)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"OAuthService Unit Tests Connection Revocation should revoke connection successfully","status":"failed","title":"should revoke connection successfully"},{"ancestorTitles":["OAuthService Unit Tests","Connection Revocation"],"duration":1,"failureMessages":[],"fullName":"OAuthService Unit Tests Connection Revocation should handle revocation when no connection exists","status":"passed","title":"should handle revocation when no connection exists"},{"ancestorTitles":["OAuthService Unit Tests","Connection Revocation"],"duration":48,"failureMessages":[],"fullName":"OAuthService Unit Tests Connection Revocation should continue with local deletion if remote revocation fails","status":"passed","title":"should continue with local deletion if remote revocation fails"}]}],"config":{"bail":0,"changedFilesWithAncestor":false,"ci":false,"collectCoverage":true,"collectCoverageFrom":["backend/**/*.js","frontend/src/**/*.{js,jsx}","!**/node_modules/**","!**/coverage/**","!**/tests/**","!**/*.config.js","!**/*.test.js","!**/*.spec.js"],"coverageDirectory":"C:\\FloworxInvite\\coverage","coverageProvider":"babel","coverageReporters":["text","lcov","html","json-summary"],"coverageThreshold":{"global":{"branches":75,"functions":85,"lines":80,"statements":80},"./backend/routes/businessTypes.js":{"branches":90,"functions":95,"lines":90,"statements":90},"./backend/routes/passwordReset.js":{"branches":85,"functions":90,"lines":85,"statements":85}},"detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":true,"expand":false,"findRelatedTests":false,"forceExit":true,"json":false,"lastCommit":false,"listTests":false,"logHeapUsage":false,"maxConcurrency":5,"maxWorkers":15,"noStackTrace":false,"nonFlagArgs":["tests/unit/OAuthService.test.js"],"notify":false,"notifyMode":"failure-change","onlyChanged":false,"onlyFailures":false,"openHandlesTimeout":1000,"passWithNoTests":false,"projects":[{"displayName":"Backend Tests","testMatch":["<rootDir>/tests/backend/**/*.test.js","<rootDir>/tests/integration/**/*.test.js","<rootDir>/tests/security/**/*.test.js","<rootDir>/tests/unit/**/*.test.js"],"testEnvironment":"node","setupFilesAfterEnv":["<rootDir>/tests/setup/jest.setup.js"],"collectCoverageFrom":["backend/**/*.js","!**/node_modules/**","!**/coverage/**","!**/tests/**"],"rootDir":"C:\\FloworxInvite"},{"displayName":"Frontend Tests","testMatch":["<rootDir>/tests/frontend/**/*.test.js","<rootDir>/frontend/src/**/*.test.js","<rootDir>/frontend/src/**/*.spec.js"],"testEnvironment":"jsdom","setupFilesAfterEnv":["@testing-library/jest-dom","<rootDir>/tests/setup/frontend.setup.js"],"moduleNameMapper":{"^@/(.*)$":"<rootDir>/frontend/src/$1","^@components/(.*)$":"<rootDir>/frontend/src/components/$1","^@services/(.*)$":"<rootDir>/frontend/src/services/$1","^@utils/(.*)$":"<rootDir>/frontend/src/utils/$1","\\.(css|less|scss|sass)$":"identity-obj-proxy","\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$":"<rootDir>/tests/mocks/fileMock.js"},"transform":{"^.+\\.(js|jsx)$":"C:\\FloworxInvite\\node_modules\\babel-jest\\build\\index.js"},"collectCoverageFrom":["frontend/src/**/*.{js,jsx}","!**/node_modules/**","!**/coverage/**","!**/tests/**"],"rootDir":"C:\\FloworxInvite"}],"reporters":[["default",{}],["C:\\FloworxInvite\\node_modules\\jest-junit\\index.js",{"outputDirectory":"tests/results","outputName":"junit.xml","classNameTemplate":"{classname}","titleTemplate":"{title}","ancestorSeparator":" › ","usePathForSuiteName":true}],["C:\\FloworxInvite\\node_modules\\jest-html-reporters\\index.js",{"publicPath":"tests/results","filename":"test-report.html","expand":true,"hideIcon":false,"pageTitle":"Floworx Test Report"}]],"rootDir":"C:\\FloworxInvite","runInBand":false,"runTestsByPath":false,"seed":-529370387,"skipFilter":false,"snapshotFormat":{"escapeString":false,"printBasicPrototype":false},"testFailureExitCode":1,"testPathPatterns":{"patterns":["tests/unit/OAuthService.test.js"],"type":"TestPathPatterns"},"testSequencer":"C:\\FloworxInvite\\node_modules\\@jest\\test-sequencer\\build\\index.js","testTimeout":10000,"updateSnapshot":"new","useStderr":false,"verbose":true,"waitForUnhandledRejections":false,"watch":false,"watchAll":false,"watchPlugins":[{"config":{},"path":"C:\\FloworxInvite\\node_modules\\jest-watch-typeahead\\build\\file_name_plugin\\plugin.js"},{"config":{},"path":"C:\\FloworxInvite\\node_modules\\jest-watch-typeahead\\build\\test_name_plugin\\plugin.js"}],"watchman":true,"workerThreads":false,"coverageLinkPath":"..\\..\\coverage\\lcov-report\\index.html"},"endTime":1757827434561,"_reporterOptions":{"publicPath":"tests/results","filename":"test-report.html","expand":true,"pageTitle":"Floworx Test Report","hideIcon":false,"testCommand":"","openReport":false,"failureMessageOnly":0,"enableMergeData":false,"dataMergeLevel":1,"inlineSource":false,"urlForTestFiles":"","darkTheme":false,"includeConsoleLog":false,"stripSkippedTest":false},"logInfoMapping":{},"attachInfos":{}})